# Bilateral Spatial Reasoning about Street Networks: Graph-based RAG with Qualitative Spatial Representations

**Authors**: Reinhard Moratz, Niklas Daute, James Ondieki, Markus Kattenbeck, Mario Krajina, Ioannis Giannopoulos

**Published**: 2025-12-17 12:40:01

**PDF URL**: [https://arxiv.org/pdf/2512.15388v1](https://arxiv.org/pdf/2512.15388v1)

## Abstract
This paper deals with improving the capabilities of Large Language Models (LLM) to provide route instructions for pedestrian wayfinders by means of qualitative spatial relations.

## Full Text


<!-- PDF content starts -->

Bilateral Spatial Reasoning about Street
Networks: Graph-based RAG with Qualitative
Spatial Representations
R. Moratz, N. Daute, J. Ondieki, M. Kattenbeck, M. Krajina, I. Giannopoulos
December 18, 2025
Abstract
This paper deals with improving the capabilities of Large Language
Models (LLM) to provide route instructions for pedestrian wayfinders by
means of qualitative spatial relations. We use a method called Retrieval-
Augmented Generation (RAG). RAG supports the LLM with context in-
formation based on the specific query. We assess the impact the added
information has on model performance for generating pedestrian route
instructions. Our findings encourage further integration of qualitative
spatial data into LLM applications—potentially benefiting areas such as
digital navigation aids, smart city tools, and accessibility technologies.
1 Introduction
Up until now, Large Language Models show rather weak performance in pro-
viding route instructions to pedestrian wayfinders. For example we can ask an
LLM (ChatGPT-4o by OpenAI) for the direction from M¨ unster central station
to nearby street Hafenweg (see figure1).
The model responded quickly with a seemingly convincing set of directions
for the given problem. However, upon closer inspection, it becomes evident that
LLM navigation is heavily prone to hallucinations and other errors. In the first
step, the model suggests leaving the central station onto ”Willy-Brandt-Allee”,
which is a street that does not exist in M¨ unster. Subsequently, the model sug-
gests walking toward the city center, while the Hafenweg is actually located
away from the city center. Next, turning onto the ”Albersloher Weg” is sug-
gested. While this road exists in M¨ unster and is close to the actual destination,
it does not make sense to take the road for the given navigation task. The
same can be said for the following two steps, where turning onto ”Aaseepark”
and ”Hammer Straße” is suggested, with neither of them being sensible choices
for the problem, while also being completely disconnected, making navigation
along the suggested route impossible. Finally, the model suggests turning onto
1arXiv:2512.15388v1  [cs.AI]  17 Dec 2025

Figure 1: Route instruction generated by LLM
the destination street ”Hafenweg”, which is the correct destination, but impos-
sible given the previous incorrect steps. When comparing this route proposed
by ChatGPT to a route provided by Google Maps, the problem becomes even
more evident. In the figure, the correct route from ”Start” to ”Finish” is shown
in green: A few simple turns from the Central Stations is all it takes to reach
the destination. The generated LLM route displayed in red on the map is how-
ever far from correct: Mutltiple disconnected segments show a complete lack
of understanding the actual navigation task, with only one of them being close
to the actual route. Observations like these highlight the current limitations of
LLMs in navigation performance, and motivated us to find approaches to boost
their capabilities in this domain.
2

Figure 2: Map detail showing erroneous route instruction
3

This paper deals with improving the capabilities of Large Language Models
to provide route instructions for pedestrian wayfinders by means of qualita-
tive spatial relations. We use a method called Retrieval-Augmented Generation
(RAG). RAG supports the LLM with context information based on the spe-
cific query. For this purpose we use a qualitative spatial representation frame-
work which is based on oriented line segments (dipoles) as basic entities [4]. In
our context aqualitativerepresentation provides mechanisms which characterize
central essential properties of objects or configurations. Aquantitativerepre-
sentation in contrast establishes a measure in relation to a unit of measurement
which has to be generally available. Qualitative spatial spatial representations
usually deal with elementary objects (e.g., positions, directions, regions) and
qualitative relations between them (e.g., ”adjacent”, ”on the left of”, ”included
in”).
2 Graph-Based Retrieval Augmented Genera-
tion (Graph-RAG)
Graph-based Retrieval Augmented Generation represents an advanced evolu-
tion of traditional RAG systems that leverages knowledge graphs to enhance
information retrieval and generation quality [1]. With Graph-RAG language
model receives not just text chunks, but structured information including en-
tity mentions and their properties, explicit relationships between entities, graph
paths showing logical connections, and multi-level abstractions (detailed facts
and high-level summaries).
Traditional RAG retrieves relevant text chunks from a vector database us-
ing semantic similarity, then feeds these chunks to a language model for gen-
eration. Graph-RAG enhances this by organizing information in a knowledge
graph structure, where entities are nodes and relationships are edges, enabling
more sophisticated retrieval strategies.
The system first constructs a knowledge graph from source documents by
extracting entities (people, places, concepts, events), identifying relationships
between entities, creating nodes for entities and edges for relationships, and
storing both structural information and associated text content. Retrieved in-
formation is assembled into context by combining node content (entity descrip-
tions), including edge information (relationships), incorporating graph structure
(how entities connect), and adding hierarchical summaries when relevant.
3 Representation of Dipole Relations
The basic entities we are using are dipoles, i.e. oriented line segments formed
by a pair of two points, a start point and an end point. Dipoles are denoted
byA, B, C, . . ., the start point bys A, the end point bye A, respectively (see
Figure 3).
4

AB
eBsB
sAeAFigure 3: A dipole is an oriented straight line segment with start and end points
These dipoles are used for representing spatial objects with an intrinsic ori-
entation. Given a set of dipoles it is possible to specify many different relations
of different arity, e.g., depending on the length of dipoles, on the angle between
different dipoles, or on the dimension and nature of the underlying space. The
goal of identifying different relations is to obtain a set of jointly exhaustive and
pairwise disjointatomicrelations such that between any two dipoles exactly one
relation holds. If these relations form a algebra which fulfills certain require-
ments it is possible to apply standard constraint-based reasoning mechanisms
which were originally developed for temporal reasoning and which have also
proved valuable for spatial reasoning. In order to enable efficient reasoning, it
should be tried to keep the number of different base relations relatively small.
For this reason, we will restrict for now to using two-dimensional continuous
space, in particularR2, and distinguish the location and orientation of the
different dipoles only according to whether a point lies to the left, to the right,
or on the straight line through the referring dipole. Thens Bcan either lie to
the left ofA(see figure 3), on the straight line throughAor to the right ofA,
expressed asAls B,Aos BorArs B, respectively. Using these three relations
between a dipole and a point it is possible to specify the relations between two
dipoles with the following four relationships:
ARs B∧ARe B∧BRs A∧BRe A,
where R is one of{r,l,o}. Since this still leads to a large number of different
atomic relations, we require in the first version of our qualitative straight line
segment relation representation all points to be ingeneral position, i.e., no
more than two points are on a straight line. This gives us the following 14
relations (Please note that in this very first representation all the four points
5

A rlrr B A rlll B A rllr B A lrrr B
A lrll B A lrrl B A llrl B A llrr B A llll B A lllr BA rrll B A rrlr B A rrrl B A rrrr B
A errs B A ells B
A eses B A sese B A rser B A lsel B A srsl B A slsr B A rele B A lere BFigure 4: The 24 atomic relations of the coarsest dipole calculus
sB,eB,sA,eAhave different locations.):
ArrrrB:=Ars B∧Are B∧Brs A∧Bre A
ArrrlB:=Ars B∧Are B∧Brs A∧Ble A
...
AllllB:=Als B∧Ale B∧Bls A∧Ble A
The casesArs B∧Ale B∧Brs A∧Ble AandAls B∧Are B∧
Bls A∧Bre Acannot be realized on the plane. These 14 relations between
line segments were already derived by Schlieder [5].
In order to obtain an algebra, we need an identity relation. This means
in addition toleftorright, we need configurations where more than one point
have the same position on the two dimensional continuous space,R2. There-
fore the smallest sensible dipole algebra has two additional relative positions of
start and end points, namely thestart, orendpoint of the other dipole. Then
sBcan be equivalent to the start point ofAor to the end point ofA. This
is denoted asAss BorAes B, respectively. Using these additional dipole-
point relations, we obtain the following ten additional dipole-dipole relations:
{ells,errs,lere,rele,slsr,srsl,lsel,rser,sese,eses}. Altogether we obtain 24 differ-
ent atomic relations (see figure 4). These relations are jointly exhaustive and
pairwise disjoint provided that all point positions are in general position. The
relation sese is the requested identity relation. We useD c(’c’ stands for ’coarse’)
to refer to the set of 24 atomic relations, andDRA cto refer to the powerset of
Dcwhich contains all 224possible unions of the atomic relations.
The relations which are introduced above in an informal way can be defined
in an algebraic way. Every dipoleDon the planeR2is an ordered pair of two
pointss Dande D, each of them is represented by its Cartesian coordinatesx
6

andy, withx, y∈Rands D̸=eD.
D= (s D,eD),s D= ((s D)x,(sD)y)
The basic relations are then described as equations with the coordinates as
variables. The set of solutions for a system of equations describes all the possible
coordinates for these points. A first such specification was presented in Moratz
et. al. [3].
3.1 Extended Versions of the Dipole Calculus
In many domains we might want to represent spatial arrangements in which
more than two start or end points of dipoles are on a straight line. Then we
need three more dipole-point relations. The additional relations describe the
cases when the point is straight behind the dipole (b), in the interior of the
dipole (i) or straight in front of the dipole (f). The corresponding regions are
shown on Figure 5. Such a set of relations was proposed by Freksa [2].
bsiefl
r
Figure 5: Extended dipole-point relations
Using the same notation scheme like the one for the coarse Dipole Relation
AlgebraDRA cwe get the following 72 atomic relations:{rrrr, rrrl, rrlr, rrll,
rlrr, rllr, rlll, lrrr, lrrl, lrll, llrr, llrl, lllr, llll, ells, errs, lere, rele, slsr, srsl, lsel,
rser, sese, eses, lllb, llfl, llbr, llrf, lirl, lfrr, lril, lrri, blrr, irrl, frrr, rbrr, lbll, flll,
brll, rfll, rlli, rrlf, illr, rilr, rrbl, rlir, rrfr, rrrb, ffbb, efbs, ifbi, bfii, sfsi, beie, ffbb,
bsef, biif, iibf, sisf, iebe, ffff, fefe, fifi, fbii, fsei, ebis, iifb, eifs, iseb, bbbb, sbsb,
ibib}. The derived fine grain Dipole Relation Algebra is calledDRA f.
7

3.2 Representation of street networks in the dipole calcu-
lus
In our application to street networks we relax the condition for the dipoles to be
straight lines. The streets segments have unique names (e.g.A, ... ,Nin figure
6). In a pairwise manner all streets segments meeting at a crossing have a spatial
relation which can by qualitatively expressed by aDRA fbase relation. Two
thirds of the relations are already contained inDRA c. The relations between
the street segments are the following:AbsefB,ArserC,AreleD,AefbsE,
AellsF,AslsrG,HsbsbI,HsrslJ,HerrsK,HfefeL,HlereM,HlselN
Figure 6: All qualitatively different street segment relations
8

4 Experiments
In our Graph-RAG application we use geographic data from OpenStreetMap.
Typically a street with a name in OpenStreetMap consists of several street
segments which are mapped on individual dipoles. So the Hafenweg from our
introductory example consists of three segments. We refer to these segments as
Hafenweg1, Hafenweg2, and Hafenweg3. In general a uniquely named street is
a sequence ofn(n≥1) street segmentss 1, . . . , s i, . . . , s n. The spatial relation
between adjacent segmentss iands i+1issiefbss i+1.
A verbalization of an individual named street starts with segments 1. The
first linguistic pattern isname(s 1) ”begins at the intersection with”name(r i).
In this configurationr iwould be the street segment that is part of the street
crossing at which streetsstarts.
In the appendix we provide the verbalization of a dipole relation knowledge
graph that corresponds to a small area of Hamburg, Germany.
In total, 240 individual trials were conducted across various LLM configura-
tions to find out whether the inclusion of qualitative geographic context helps
improve the navigation performance of LLMs. We are first going to provide an
overview of the results obtained from our experiments, before breaking down
the results by different factors such as test city or Large Language Model tested.
Group # Experiments # Successful # Failed Success Rate (%)
Control Group 120 0 120 0%
Test Group 120 75 45 62.5%
Table 1: Overview of experiment results in control and test groups with success
and failure counts and complimentary success rates.
All trials could be executed successfully by the methods described above.
This means that we got a valid LLM response for each navigation task under
all test conditions. However, this does not imply that all responses were correct
in terms of navigation success, but simply that we were able to collect all the
necessary data. In total, 240 navigation tasks were answered by the LLMs and
manually labeled as either correct or incorrect. Table 1 summarizes the overall
results of our experiments.
There is a visible difference in navigation task success rates between the
control and test groups. In each group, the exact same 120 navigation tasks
were executed. Out of these 120 tasks, no trial in the control group could
be labeled as successful. Consequently, all trials in this group were labeled as
failures, leading to a task success rate of 0%. In the test group however, 75
out of 120 trials could be labeled as successful. With 45 remaining failures, this
results in a task success rate of 62.5%.
When comparing the test group performance across the two test cities, we
can make several key observations. First, the task success rate was increased
in both cities compared to the control group (which had a success rate of 0%
in both cities). In Hamburg, the task success rate climbed to 86.6% while in
9

Figure 7: Test Group Performance by City.
M¨ unster it reached just 38.3%. We assume that the reason or this difference
is a difference in size of both data sets. The M¨ unster data set contains 128
individual streets and the average distance for the routes is 1272 Meters. The
Hamburg data set contains 38 individual streets and the average distance for
the routes is 899 Meters. So it seems like our method gets less successful with
longer routes. We will investigate this in more detail in the future.
Figure 8: Test Group Performance by LLM.
Further, comparing the test group performance across the three tested LLMs
as depicted in Figure 8, there are noteworthy differences in their performance
increase. While all models performed better compared to their control group
performance of 0%, the model which performed best across all trials in the test
10

group was Google’s Gemini 2.5 Pro. It achieved a task success rate of 70%,
answering 28 out of 40 navigation tasks correctly. The next best performing
model was Claude 4.5, which achieved a slightly lower task success rate of 65%.
Claude answered 26 out of 40 navigation tasks correctly. In total, the worst
performing model in the test group was GPT-4o, with 21 correct answers out
of 40 possible, amounting to a task success rate of 52.5%.
5 Summary
In summary, our experiments revealed that LLM navigation perfomance with
additional qualitative geographic context was higher than without it. This effect
was not limited to a specific city or model, but could be observed across all
combinations tested in this study.
References
[1] Darren Edge, Ha Trinh, Newman Cheng, Joshua Bradley, Alex Chao,
Apurva Mody, Steven Truitt, Dasha Metropolitansky, Robert Osazuwa Ness,
and Jonathan Larson. From local to global: A graph rag approach to query-
focused summarization.arXiv preprint arXiv:2404.16130, 2024.
[2] C. Freksa. Using orientation information for qualitative spatial reasoning. In
A. U. Frank, I. Campari, and U. Formentini, editors,Theories and methods
of spatio-temporal reasoning in geographic space, volume 639 ofLNCS, pages
162–178. Springer, Berlin, 1992.
[3] R. Moratz, J. Renz, and D. Wolter. Qualitative spatial reasoning about line
segments. In Horn. W., editor,ECAI 2000. Proceedings of the 14th European
Conference on Artifical Intelligence, Amsterdam, 2000. IOS Press.
[4] Reinhard Moratz, Dominik L¨ ucke, and Till Mossakowski. A condensed se-
mantics for qualitative spatial reasoning about oriented straight line seg-
ments.Artificial Intelligence, 175(16-17):2099–2127, 2011.
[5] C. Schlieder. Reasoning about ordering. In A. Frank and W. Kuhn, edi-
tors,Spatial Information Theory: a theoretical basis for GIS, number 988 in
Lecture Notes in Computer Science, pages 341–349, Berlin, 1995. Springer
Verlag.
Appendix
=== Agathe-Lasch-Weg ===
Agathe-Lasch-Weg begins at the intersection with Holmbrook, Paul-Ehrlich-Straße.
Emkendorfstraße then branches off to the right.
11

Roosens Weg then branches off to the right.
Halbmondsweg then branches off to the left.
Klein Flottbeker Weg then branches off to the right.
Reventlowstraße then branches off to the right.
=== Ansorgestraße ===
Ansorgestraße begins at the intersection with Emkendorfstraße, Liebermannstraße.
Roosens Weg then branches off to the right.
=== Behringstraße ===
Behringstraße begins at the intersection with [’Walderseestraße’, ’Behringstraße’].
=== Bernadottestraße ===
Bernadottestraße begins at the intersection with Droysenstraße.
Halbmondsweg then branches off to the right.
Halbmondsweg then branches off to the right.
Poppes Weg then branches off to the right.
Roosens Weg then branches off to the left.
Schlagbaumtwiete then branches off to the right.
Elbbl¨ ocken then branches off to the right.
=== Borchlingweg ===
Borchlingweg begins at the intersection with Ansorgestraße, Halbmondsweg.
Stindeweg then branches off to the right.
Langmaackweg then branches off to the right.
=== Corinthstraße ===
Corinthstraße begins at the intersection with Bernadottestraße.
Elbbl¨ ocken then branches off to the right.
Elbchaussee then branches off to the right.
=== Droysenstraße ===
Droysenstraße begins at the intersection with Jungmannstraße.
Preußerstraße then branches off to the left.
=== Elbbl¨ ocken ===
Elbbl¨ ocken begins at the intersection with Bernadottestraße.
Leipoldstieg then branches off to the right.
=== Elbchaussee ===
Elbchaussee begins at the intersection with Schlagbaumtwiete.
Corinthstraße then branches off to the left.
=== Emkendorfstraße ===
Emkendorfstraße begins at the intersection with Agathe-Lasch-Weg.
R¨ opers Weide then branches off to the left.
12

Lavaterweg then branches off to the left.
Reventlowstraße then branches off to the right.
=== Ernst-August-Straße ===
Ernst-August-Straße begins at the intersection with Liebermannstraße.
Roosens Weg then branches off to the left.
=== Halbmondsweg ===
Halbmondsweg begins at the intersection with Bernadottestraße.
Bernadottestraße then branches off to the left.
Ansorgestraße then branches off to the left.
Borchlingweg then branches off to the right.
Agathe-Lasch-Weg then branches off to the right.
Klein Flottbeker Weg then branches off to the left.
Reventlowstraße then branches off to the right.
=== Hammerichstraße ===
Hammerichstraße begins at the intersection with Jungmannstraße.
Walderseestraße then branches off to the left.
=== Holmbrook ===
Holmbrook begins at the intersection with Agathe-Lasch-Weg, Paul-Ehrlich-Straße.
=== Jungmannstraße ===
Jungmannstraße begins at the intersection with Reventlowstraße.
Preußerstraße then branches off to the left.
Droysenstraße then branches off to the left.
=== Klein Flottbeker Weg ===
Klein Flottbeker Weg begins at the intersection with Agathe-Lasch-Weg, Halbmondsweg, Reventlowstraße.
Zickzackweg then branches off to the left.
Droysenstraße then branches off to the left.
=== Langmaackweg ===
Langmaackweg begins at the intersection with Borchlingweg.
=== Lavaterweg ===
Lavaterweg begins at the intersection with Emkendorfstraße.
=== Leipoldstieg ===
Leipoldstieg begins at the intersection with Elbbl¨ ocken.
=== Liebermannstraße ===
Liebermannstraße begins at the intersection with Ansorgestraße, Emkendorfstraße.
Ernst-August-Straße then branches off to the right.
Bernadottestraße then branches off to the right.
13

=== Lobsienweg ===
Lobsienweg begins at the intersection with Droysenstraße.
=== Meistertwiete ===
Meistertwiete begins at the intersection with Bernadottestraße.
=== Olshausenstraße ===
Olshausenstraße begins at the intersection with Reventlowstraße.
Reventlowstraße then branches off to the right.
Walderseestraße then branches off to the left.
=== Paul-Ehrlich-Straße ===
Paul-Ehrlich-Straße begins at the intersection with Agathe-Lasch-Weg, Holmbrook.
=== Poppes Weg ===
Poppes Weg begins at the intersection with Bernadottestraße.
Ansorgestraße then branches off to the left.
=== Preußerstraße ===
Preußerstraße begins at the intersection with Jungmannstraße.
Droysenstraße then branches off to the right.
=== Reventlowstraße ===
Reventlowstraße begins at the intersection with Olshausenstraße.
Walderseestraße then branches off to the left.
=== Roosens Park ===
Roosens Park begins at the intersection with Ansorgestraße.
=== Roosens Weg ===
Roosens Weg begins at the intersection with Ansorgestraße.
Agathe-Lasch-Weg then branches off to the left.
Reventlowstraße then branches off to the right.
=== R¨ opers Weide ===
R¨ opers Weide begins at the intersection with Walderseestraße.
Emkendorfstraße then branches off to the right.
=== Schlagbaumtwiete ===
Schlagbaumtwiete begins at the intersection with Elbchaussee.
Bernadottestraße then branches off to the right.
=== Slevogtstieg ===
Slevogtstieg begins at the intersection with Elbbl¨ ocken.
14

=== Stindeweg ===
Stindeweg begins at the intersection with Borchlingweg.
=== Taxusweg ===
Taxusweg begins at the intersection with Halbmondsweg.
=== Walderseestraße ===
Walderseestraße begins at the intersection with Reventlowstraße.
Reventlowstraße then branches off to the right.
=== Zickzackweg ===
Zickzackweg begins at the intersection with Klein Flottbeker Weg.
=== Zypressenweg ===
Zypressenweg begins at the intersection with Halbmondsweg.
=== [’Walderseestraße’, ’Behringstraße’] ===
[’Walderseestraße’, ’Behringstraße’] begins at the intersection with Behringstraße.
Walderseestraße then branches off to the right.
=== ¨Ovelg¨ onner Hohlweg ===
¨Ovelg¨ onner Hohlweg begins at the intersection with Elbchaussee, Halbmondsweg.
15